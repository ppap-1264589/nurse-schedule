<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>T√≠nh s·ªë c√°ch l·∫≠p l·ªãch y t√°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Hi·ªáu ·ª©ng rung nh·∫π khi v∆∞·ª£t gi·ªõi h·∫°n */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-4px); }
    }
    .shake {
      animation: shake 0.3s;
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4 text-center text-indigo-600">
      üßÆ L·∫≠p l·ªãch l√†m vi·ªác y t√°
    </h1>

    <!-- üîΩ PH·∫¶N DETAILS M√î T·∫¢ ƒê·ªÄ B√ÄI -->
    <details class="mb-6">
      <summary class="cursor-pointer text-indigo-600 font-semibold hover:underline">
        Chi ti·∫øt ƒë·ªÅ b√†i
      </summary>
      <div class="mt-3 text-gray-700 text-sm leading-relaxed">
        <p>M·ªôt nh√¢n vi√™n y t√° l√†m vi·ªác trong <b>n</b> ng√†y.</p>
        <ul class="list-disc ml-5">
          <li>C√¥ ·∫•y ch·ªâ c√≥ th·ªÉ l√†m vi·ªác t·ªëi thi·ªÉu <b>k‚ÇÅ</b> ng√†y li√™n ti·∫øp v√† t·ªëi ƒëa <b>k‚ÇÇ</b> ng√†y li√™n ti·∫øp.</li>
          <li>Gi·ªØa hai ƒë·ª£t l√†m vi·ªác li√™n ti·∫øp, c√¥ ·∫•y ƒë∆∞·ª£c ngh·ªâ ƒë√∫ng <b>m·ªôt ng√†y</b>.</li>
          <li>Kh√¥ng ƒë∆∞·ª£c ph√©p ngh·ªâ hai ng√†y li√™n ti·∫øp.</li>
        </ul>
        <p class="mt-2">Y√™u c·∫ßu: ƒê·∫øm s·ªë c√°ch s·∫Øp x·∫øp l·ªãch l√†m vi·ªác h·ª£p l·ªá trong <b>n</b> ng√†y.  
        K·∫øt qu·∫£ l·∫•y <code>mod 1e9 + 7</code>.</p>
      </div>
    </details>
    <!-- üîº H·∫æT PH·∫¶N M√î T·∫¢ -->

    <!-- üßÆ FORM NH·∫¨P -->
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700">S·ªë ng√†y (n):</label>
        <input id="n" type="number" class="mt-1 w-full border rounded-lg p-2" placeholder="V√≠ d·ª•: 10" oninput="limitInput('n', 10000000)">
        <p id="warn-n" class="text-red-500 text-sm hidden">‚ö†Ô∏è Gi√° tr·ªã n v∆∞·ª£t qu√° 10‚Å∑!</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">S·ªë ng√†y l√†m t·ªëi thi·ªÉu (k‚ÇÅ):</label>
        <input id="k1" type="number" class="mt-1 w-full border rounded-lg p-2" placeholder="V√≠ d·ª•: 2" oninput="limitInput('k1', 1000000)">
        <p id="warn-k1" class="text-red-500 text-sm hidden">‚ö†Ô∏è Gi√° tr·ªã k‚ÇÅ v∆∞·ª£t qu√° 10‚Å∂!</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">S·ªë ng√†y l√†m t·ªëi ƒëa (k‚ÇÇ):</label>
        <input id="k2" type="number" class="mt-1 w-full border rounded-lg p-2" placeholder="V√≠ d·ª•: 4" oninput="limitInput('k2', 1000000)">
        <p id="warn-k2" class="text-red-500 text-sm hidden">‚ö†Ô∏è Gi√° tr·ªã k‚ÇÇ v∆∞·ª£t qu√° 10‚Å∂!</p>
      </div>

      <button onclick="compute()" class="w-full bg-indigo-500 text-white font-semibold py-2 rounded-lg hover:bg-indigo-600 transition">
        T√≠nh k·∫øt qu·∫£
      </button>

      <div id="result" class="text-center text-xl font-bold text-green-600 mt-4"></div>
    </div>
  </div>

  <script>
    const MOD = 1e9 + 7;

    // Gi·ªõi h·∫°n input v√† hi·ªÉn th·ªã c·∫£nh b√°o + hi·ªáu ·ª©ng rung
    function limitInput(id, maxValue) {
      const el = document.getElementById(id);
      const warn = document.getElementById("warn-" + id);
      let val = Number(el.value);
      let max = Number(maxValue);

      if (val > max) {
        el.value = max;
        warn.classList.remove("hidden");
        el.classList.add("shake", "border-red-400");
        setTimeout(() => {
          warn.classList.add("hidden");
          el.classList.remove("shake", "border-red-400");
        }, 1500);
      } else {
        warn.classList.add("hidden");
      }
    }

    function add(a, b) {
      a += b;
      if (a >= MOD) a -= MOD;
      return a;
    }

    function sub(a, b) {
      a -= b;
      if (a < 0) a += MOD;
      return a;
    }

    function compute() {
      const n = +document.getElementById('n').value;
      const k1 = +document.getElementById('k1').value;
      const k2 = +document.getElementById('k2').value;
      const resultEl = document.getElementById('result');

      if (n <= 0 || k1 <= 0 || k2 < k1) {
        resultEl.innerText = "‚ö†Ô∏è D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá!";
        resultEl.classList.replace("text-green-600", "text-red-500");
        return;
      }

      if (n > 1e7 || k1 > 1e6 || k2 > 1e6) {
        resultEl.innerText = "‚ö†Ô∏è Gi√° tr·ªã v∆∞·ª£t qu√° gi·ªõi h·∫°n cho ph√©p!";
        resultEl.classList.replace("text-green-600", "text-red-500");
        return;
      }

      // Logic ch√≠nh (d·ªãch t·ª´ C++)
      let dp = [1, 1];
      for (let i = 2; i <= k2; i++) dp.push(0);

      let restLoad = 0;
      for (let p = k1; p <= k2; p++) restLoad = add(restLoad, dp[p]);

      for (let i = 2; i <= n; i++) {
        let curLoad = sub(restLoad, dp[k2]);
        curLoad = add(curLoad, dp[k1 - 1]);
        dp.unshift(restLoad);
        dp.pop();
        restLoad = curLoad;
      }

      const ans = (dp[0] + restLoad) % MOD;
      resultEl.innerText = `‚úÖ S·ªë c√°ch: ${ans}`;
      resultEl.classList.replace("text-red-500", "text-green-600");
    }
  </script>
</body>
</html>
